{% extends "base.html" %}

{% block content %}
<h2>游늶 뉌햣 향햟혪쒫쥃</h2>

<!-- 햐혝햟혝햦혜혝햦햨햟 -->
<div class="stats-grid">
    <div class="stat-card status-open">
        <span class="stat-number">{{ open_tickets|length }}</span>
        <span class="stat-label">游댮 뤰햨혦혝혦햣</span>
    </div>
    <div class="stat-card status-in_progress">
        <span class="stat-number">{{ in_progress_tickets|length }}</span>
        <span class="stat-label">游리  햟햠쮐햣</span>
    </div>
    <div class="stat-card status-closed">
        <span class="stat-number">{{ closed_tickets|length }}</span>
        <span class="stat-label">游릭 행햟햨혦혝혦햣</span>
    </div>
</div>

{% if tickets %}
<div class="tickets-grid">
    {% for ticket in tickets %}
    <div class="ticket-card status-{{ ticket.status.value }}">
        <div class="ticket-header">
            <span class="ticket-id">#{{ ticket.id }}</span>
            <span class="status-badge status-{{ ticket.status.value }}">
                {% if ticket.status.value == 'open' %}游댮 뤰햨혦혝햟
                {% elif ticket.status.value == 'in_progress' %}游리  햟햠쮐햣
                {% else %}游릭 행햟햨혦혝햟{% endif %}
            </span>
        </div>
        
        <h3 class="ticket-title">{{ ticket.title }}</h3>
        <p class="ticket-description">{{ ticket.description[:100] }}{% if ticket.description|length > 100 %}...{% endif %}</p>
        
        <div class="ticket-meta">
            <small>游늰 {{ ticket.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
            <br>
            <small>游녻 ID 쮏혧향쮏쒫썜햣햩혪: {{ ticket.created_by }}</small>
        </div>
        
        <div class="ticket-actions">
            <a href="{{ url_for('ticket_detail', ticket_id=ticket.id) }}" 
               class="btn btn-small">游 쮏얨쮏쐃쫧왏</a>
            
            {% if ticket.status.value != 'closed' %}
            <a href="{{ url_for('manage_ticket', ticket_id=ticket.id) }}" 
               class="btn btn-small btn-warning">丘뙖잺 햒햟쒫햣햫햦햣</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>游땺 행햟혪쒫쮏 쮏쥃 햫햣혝</p>
    <a href="{{ url_for('create_ticket') }}" class="btn btn-primary">햐쮏햢햟혝혧 햣쒬혩 향햟혪쒫쥄</a>
</div>
{% endif %}

<div class="action-buttons mt-3">
    <a href="{{ url_for('create_ticket') }}" class="btn btn-primary">+ 햐쮏햢햟혝혧 햫쮏쒬혩 향햟혪쒫쥄</a>
</div>
{% endblock %}