{% extends "base.html" %}

{% block content %}
<h2>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã</h2>

{% if users %}
<div class="users-grid">
    {% for user in users %}
    <div class="user-card {% if user.is_responsible %}responsible{% endif %}">
        <div class="user-header">
            <h3>{{ user.name }}</h3>
            {% if user.is_responsible %}
            <span class="role-badge responsible">üëî –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π</span>
            {% else %}
            <span class="role-badge">üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
            {% endif %}
        </div>
        
        <div class="user-info">
            <p><strong>ID:</strong> {{ user.id }}</p>
            <p><strong>–¢–∏–ø:</strong> {% if user.is_responsible %}–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫{% else %}–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å{% endif %}</p>
        </div>
        
        <div class="user-stats">
            {% set user_tickets = [] %}
            {% for ticket in tickets %}
                {% if ticket.created_by == user.id %}
                    {% set _ = user_tickets.append(ticket) %}
                {% endif %}
            {% endfor %}
            <p><strong>–°–æ–∑–¥–∞–Ω–æ –∑–∞—è–≤–æ–∫:</strong> {{ user_tickets|length }}</p>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
</div>
{% endif %}

<div class="action-buttons">
    <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>
{% endblock %}